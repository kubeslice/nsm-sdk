# Metadata helper

Metadata helper generation script has 2 input parameters:
* output - output file name
* type - name<isClient,type>:
    * name - prefix for metadata type, constructor
    * isClient - metadata.Map(ctx, isClient)
    * type - stored type

gen.go:
```go
package connect

//go:generate bash ../../utils/metadata/helper.sh -output metadata_helper.gen.go -type nsClient<false,*github.com/networkservicemesh/api/pkg/api/networkservice.NetworkServiceClient>
```
metadata_helper.gen.go:
```go
// Code generated by "-output metadata_helper.gen.go -type nsClient<false,*github.com/networkservicemesh/api/pkg/api/networkservice.NetworkServiceClient>"; DO NOT EDIT.
package connect

import (
	"context"
	"sync"

	"github.com/networkservicemesh/api/pkg/api/networkservice"

	"github.com/networkservicemesh/sdk/pkg/networkservice/utils/metadata"
)

const (
	_networkservice_NetworkServiceClientKey _networkservice_NetworkServiceClientKeyType = "_networkservice_NetworkServiceClient"
)

type _networkservice_NetworkServiceClientKeyType string

var _nil__networkservice_NetworkServiceClient = func() (val *networkservice.NetworkServiceClient) { return }()

type nsClientMetadataHelper struct {
	m *sync.Map
}

func nsClientMetaData(ctx context.Context) *nsClientMetadataHelper {
	return &nsClientMetadataHelper{
		m: metadata.Map(ctx, false),
	}
}

func (h *nsClientMetadataHelper) Store(value *networkservice.NetworkServiceClient) {
	h.m.Store(_networkservice_NetworkServiceClientKey, value)
}

func (h *nsClientMetadataHelper) LoadOrStore(value *networkservice.NetworkServiceClient) (*networkservice.NetworkServiceClient, bool) {
	raw, ok := h.m.LoadOrStore(_networkservice_NetworkServiceClientKey, value)
	return raw.(*networkservice.NetworkServiceClient), ok
}

func (h *nsClientMetadataHelper) Load() (*networkservice.NetworkServiceClient, bool) {
	if raw, ok := h.m.Load(_networkservice_NetworkServiceClientKey); ok {
		return raw.(*networkservice.NetworkServiceClient), true
	}
	return _nil__networkservice_NetworkServiceClient, false
}

func (h *nsClientMetadataHelper) LoadAndDelete() (*networkservice.NetworkServiceClient, bool) {
	if raw, ok := h.m.LoadAndDelete(_networkservice_NetworkServiceClientKey); ok {
		return raw.(*networkservice.NetworkServiceClient), true
	}
	return _nil__networkservice_NetworkServiceClient, false
}

func (h *nsClientMetadataHelper) Delete() {
	h.m.Delete(_networkservice_NetworkServiceClientKey)
}
```